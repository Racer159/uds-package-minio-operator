# yaml-language-server: $schema=https://raw.githubusercontent.com/defenseunicorns/zarf/v0.33.1/zarf.schema.json
kind: ZarfPackageConfig

metadata:
  name: minio-operator
  description: auto-generated using `zarf dev generate`

components:
  - name: minio-operator
    charts:
      - name: uds-minio-config
        namespace: minio-operator
        version: 0.1.0
        localPath: ../chart
      - name: minio-operator
        version: v5.0.15
        url: https://github.com/minio/operator.git
        gitPath: helm/operator
        namespace: minio-operator
        valuesFiles:
          - ../values/common-values.yaml
      - name: minio-tenant
        version: v5.0.15
        url: https://github.com/minio/operator.git
        gitPath: helm/tenant/
        namespace: minio
        valuesFiles:
          - ../values/tenant-values.yaml
    actions:
      onDeploy:
        after:
          - description: Validate Minio Operator Package
            maxTotalSeconds: 300
            wait:
              cluster:
                kind: Packages
                name: minio-operator
                namespace: minio-operator
                condition: "'{.status.phase}'=Ready"
        # TODO add one of these for the tenant CR to be ready